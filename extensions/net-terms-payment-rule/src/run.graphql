query RunInput {
  cart {
    # 1. NEW: Get the total price so we can compare it to the limit
    cost {
      totalAmount {
        amount
      }
    }
    buyerIdentity {
      customer {
        # 2. UPDATED: Check for specific tags to determine terms
        isNet15: hasAnyTag(tags: ["Net15_Approved"])
        isNet30: hasAnyTag(tags: ["Net30_Approved"])
        isNet60: hasAnyTag(tags: ["Net60_Approved"])
        
        # 3. NEW: Get the Credit Limit & Balance
        credit_limit: metafield(namespace: "net_terms", key: "credit_limit") {
          value
        }
        outstanding: metafield(namespace: "net_terms", key: "outstanding") {
          value
        }
      }
    }
  }
  paymentMethods {
    id
    name
  }
}